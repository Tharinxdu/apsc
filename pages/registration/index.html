<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>APSC 2026 – Conference Registration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="page-shell">
    <header class="page-header">
      <div>
        <h1>APSC 2026 – Online Registration</h1>
        <p>Register for the APSC 2026 Conference and Rehabilitation Workshop.</p>
      </div>

      <!-- ★ ADDED: EARLY BIRD / LATE BADGE -->
      <div id="pricingPeriodBadge" class="pricing-badge"></div>
    </header>

    <main class="page-main">
      <section class="card">
        <form id="registrationForm" novalidate>
          <!-- SECTION 1: PERSONAL INFORMATION -->
          <h2 class="card-title">Section 1 – Personal Information</h2>
          <p class="card-subtitle">
            Please provide your details as they should appear on your certificate.
          </p>

          <div class="form-grid">
            <!-- Title -->
            <div class="form-group">
              <label for="title">Title <span class="required">*</span></label>
              <select id="title" name="title" required>
                <option value="">Select your title</option>
                <option value="Prof.">Prof.</option>
                <option value="Dr.">Dr.</option>
                <option value="Mr.">Mr.</option>
                <option value="Ms.">Ms.</option>
                <option value="Mrs.">Mrs.</option>
                <option value="Other">Other</option>
              </select>
              <div class="error-message" data-error-for="title"></div>
            </div>

            <!-- First Name -->
            <div class="form-group">
              <label for="firstName">First Name <span class="required">*</span></label>
              <input type="text" id="firstName" name="firstName" required />
              <div class="error-message" data-error-for="firstName"></div>
            </div>

            <!-- Last Name -->
            <div class="form-group">
              <label for="lastName">Last Name <span class="required">*</span></label>
              <input type="text" id="lastName" name="lastName" required />
              <div class="error-message" data-error-for="lastName"></div>
            </div>

            <!-- Designation / Position -->
            <div class="form-group">
              <label for="designation">Designation / Position <span class="required">*</span></label>
              <input type="text" id="designation" name="designation" required />
              <div class="error-message" data-error-for="designation"></div>
            </div>

            <!-- Affiliated Institution / Organization -->
            <div class="form-group full-width">
              <label for="institution">Affiliated Institution / Organization <span class="required">*</span></label>
              <input type="text" id="institution" name="institution" required />
              <div class="error-message" data-error-for="institution"></div>
            </div>

            <!-- Country of Residence -->
            <div class="form-group">
              <label for="country">Country of Residence <span class="required">*</span></label>
              <select id="country" name="country" required>
                <option value="">Select your country</option>
                <!-- JS will populate -->
              </select>
              <small class="help-text">
                Fee bands are based on conference rules for low/lower-middle vs upper-middle/high income countries.
              </small>
              <small class="help-text">
                For reference: 
                <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/906519-world-bank-country-and-lending-groups"
                   target="_blank" rel="noopener noreferrer">
                  View World Bank country and lending groups
                </a>
              </small>
              <div class="error-message" data-error-for="country"></div>
            </div>

            <!-- Email -->
            <div class="form-group">
              <label for="email">Email Address <span class="required">*</span></label>
              <input type="email" id="email" name="email" required />
              <small class="help-text">
                Please enter carefully — all correspondence will be sent here.
              </small>
              <div class="error-message" data-error-for="email"></div>
            </div>

            <!-- Mobile Number -->
            <div class="form-group">
              <label for="mobile">Mobile Number (with country code) <span class="required">*</span></label>
              <input type="tel" id="mobile" name="mobile" placeholder="+94..." required />
              <div class="error-message" data-error-for="mobile"></div>
            </div>
          </div>

          <hr class="section-divider" />

          <!-- SECTION 2: REGISTRATION DETAILS -->
          <h2 class="card-title">Section 2 – Registration Details</h2>
          <div class="form-grid">
            <!-- Registration Category -->
            <div class="form-group">
              <label for="participantCategory">Registration Category <span class="required">*</span></label>
              <select id="participantCategory" name="participantCategory" required>
                <option value="">Select category</option>
                <option value="physician">Physician</option>
                <option value="non-physician">Non-physician</option>
              </select>
              <div class="error-message" data-error-for="participantCategory"></div>
            </div>
          </div>

          <!-- SECTION 3: CONFERENCE PARTICIPATION -->
          <h2 class="card-title">Section 3 – Conference Participation</h2>
          <p class="card-subtitle">
            You may select only one option.
          </p>
          <div class="form-group">
            <label class="radio-label">
              <input
                type="radio"
                name="conferenceType"
                value="full"
                required
              />
              <span>
                Full Conference Registration (26th, 27th, 28th Nov 2026)
              </span>
            </label>
            <label class="radio-label">
              <input
                type="radio"
                name="conferenceType"
                value="rehab"
                required
              />
              <span>
                Rehabilitation Workshop (single day registration on 28th Nov 2026)
              </span>
            </label>
            <div class="error-message" data-error-for="conferenceType"></div>
          </div>

          <hr class="section-divider" />

          <!-- FEE SUMMARY -->
          <section class="fee-summary" id="feeSummarySection">
            <h2 class="card-title">Fee Summary</h2>

            <!-- ★ ADDED: PERIOD TEXT -->
            <p id="feePeriodText" class="fee-period-text"></p>

            <div class="fee-amount" id="feeAmountDisplay">
              Select your country, category, and participation type to see the fee.
            </div>
            <input type="hidden" id="feeAmount" name="feeAmount" value="" />
            <input type="hidden" id="incomeGroup" name="incomeGroup" value="" />
          </section>

          <hr class="section-divider" />

          <!-- SECTION 7: CONSENT & DECLARATIONS -->
          <h2 class="card-title">Section 4 – Consent & Declarations</h2>

          <!-- ★ CONSENT CHECKBOXES NOW ENABLED DIRECTLY -->

          <div class="consent-item">
            <div class="consent-text">
              <strong>Consent for Data Use</strong>
              <p>
                By submitting this form, I consent to the collection and processing of my personal data 
                by APSC 2026 for the purposes of conference registration, communication, and event 
                management, in accordance with the APSC 2026 Privacy Policy.
              </p>
              <button type="button" class="link-button" data-open-modal="dataUseModal">
                View Privacy & Data Use Policy
              </button>
            </div>
            <label class="checkbox-label">
              <input type="checkbox" id="consentDataUse" name="consentDataUse" />
              <span>I agree</span>
            </label>
          </div>

          <div class="consent-item">
            <div class="consent-text">
              <strong>Terms &amp; Conditions</strong>
              <p>
                I confirm that the information provided above is true and accurate to the best of my knowledge. 
                I understand that registration is confirmed only upon receipt of full payment.
              </p>
              <button type="button" class="link-button" data-open-modal="termsModal">
                View Terms &amp; Conditions
              </button>
            </div>
            <label class="checkbox-label">
              <input type="checkbox" id="consentTerms" name="consentTerms" />
              <span>I accept the Terms &amp; Conditions</span>
            </label>
          </div>

          <!-- Cancellation Policy -->
          <div class="cancellation-block">
            <button type="button" class="link-button" data-open-modal="cancellationModal">
              View Cancellation Policy
            </button>
          </div>

          <div class="error-message" data-error-for="consent"></div>

          <hr class="section-divider" />

          <!-- SUBMIT -->
          <div class="form-actions">
            <button type="submit" class="primary-button">
              Submit Registration
            </button>
            <div class="form-status" id="formStatus"></div>
          </div>

          <input type="hidden" id="redirectSuccess" value="payment-success.html" />
          <input type="hidden" id="redirectError" value="payment-error.html" />
        </form>
      </section>

      <!-- SUCCESS MESSAGE -->
      <section class="card success-card hidden" id="successSection">
        <h2 class="card-title">Registration Submitted</h2>
        <p>
          Thank you for registering for APSC 2026. You will receive a confirmation email 
          once your registration has been processed.
        </p>
        <p id="successDetails"></p>
      </section>
    </main>
  </div>

  <!-- MODALS (UNCHANGED) -->
  <div class="modal-overlay hidden" id="dataUseModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Privacy &amp; Data Use Policy</h3>
        <button class="icon-button" data-close-modal>&times;</button>
      </div>
      <div class="modal-body">
        <p>
          By submitting this form, you consent to the collection and processing of your personal data 
          by APSC 2026 for the purposes of conference registration, communication, and event management,
          in accordance with the APSC 2026 Privacy Policy.
        </p>
        <p>
          Your data will be stored securely and used only for purposes related to the conference 
          and related events.
        </p>
      </div>
      <div class="modal-footer">
        <button class="secondary-button" data-close-modal>Close</button>
      </div>
    </div>
  </div>

  <!-- Terms Modal -->
  <div class="modal-overlay hidden" id="termsModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Terms &amp; Conditions</h3>
        <button class="icon-button" data-close-modal>&times;</button>
      </div>
      <div class="modal-body">
        <p>
          I confirm that the information provided above is true and accurate to the best of my knowledge. 
          I understand that registration is confirmed only upon receipt of full payment.
        </p>
        <p>
          By accepting these terms, you acknowledge that all fees are payable in USD and subject to the 
          registration rules published by the conference.
        </p>
      </div>
      <div class="modal-footer">
        <button class="secondary-button" data-close-modal>Close</button>
      </div>
    </div>
  </div>

  <!-- Cancellation Modal -->
  <div class="modal-overlay hidden" id="cancellationModal">
    <div class="modal">
      <div class="modal-header">
        <h3>Cancellation Policy</h3>
        <button class="icon-button" data-close-modal>&times;</button>
      </div>
      <div class="modal-body">
        <p>
          All cancellations must be notified by email to the Conference Secretariat.
        </p>
        <p>
          Refunds will be made when written notice of cancellation is received by the secretariat at 
          <strong>apsc2026.secretariat@gmail.com</strong> on or before <strong>31 August 2026</strong>. 
          A cancellation charge of 30% of fees paid will be deducted to cover administrative costs. 
          All refund procedures will be done by the secretariat via the online registration system 
          after the conference.
        </p>
        <p>
          Cancellations made after 31 August 2026 will not be refunded, nor will refunds be provided for no-shows. 
        </p>
      </div>
      <div class="modal-footer">
        <button class="secondary-button" data-close-modal>Close</button>
      </div>
    </div>
  </div>

  <script src="app.js" type="module"></script>
</body>
</html>
